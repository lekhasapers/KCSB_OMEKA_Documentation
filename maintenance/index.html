<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Maintenance - Omeka-S Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/docco.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../css/custom.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
 
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5YEGVE5WW8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5YEGVE5WW8');
</script>

    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Omeka-S Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../introduction/" class="nav-link">Introduction</a>
                            </li>
                            <li class="nav-item">
                                <a href="../system-requirements/" class="nav-link">System Requirements</a>
                            </li>
                            <li class="nav-item">
                                <a href="../installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="nav-item">
                                <a href="../configuration/" class="nav-link">Configuration</a>
                            </li>
                            <li class="nav-item">
                                <a href="../user-guide/" class="nav-link">User Guide</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Maintenance</a>
                            </li>
                            <li class="nav-item">
                                <a href="../faq/" class="nav-link">FAQ</a>
                            </li>
                            <li class="nav-item">
                                <a href="../appendices/" class="nav-link">Appendix</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../user-guide/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../faq/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#maintenance-and-troubleshooting" class="nav-link">Maintenance and Troubleshooting</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#keeping-the-lamp-stack-updated" class="nav-link">Keeping the LAMP Stack Updated</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#backing-up-omeka-s" class="nav-link">Backing Up Omeka S</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#prerequisites" class="nav-link">Prerequisites</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="maintenance-and-troubleshooting">Maintenance and Troubleshooting</h1>
<h2 id="keeping-the-lamp-stack-updated">Keeping the LAMP Stack Updated</h2>
<p>To ensure the LAMP stack remains secure and compatible with Omeka S, follow these steps to keep your system and software updated:</p>
<h3 id="update-package-lists">Update Package Lists</h3>
<pre><code class="language-sh">sudo apt update
</code></pre>
<h3 id="upgrade-installed-packages">Upgrade Installed Packages</h3>
<pre><code class="language-sh">sudo apt upgrade
</code></pre>
<h3 id="full-distribution-upgrade">Full Distribution Upgrade</h3>
<pre><code class="language-sh">sudo apt dist-upgrade
</code></pre>
<h3 id="version-control-maintenance">Version Control Maintenance</h3>
<p>Ensure appropriate versions for Apache, MySQL, PHP:</p>
<pre><code class="language-sh">sudo apt install apache2 mysql-server php
</code></pre>
<p>Check for specific version updates:</p>
<ul>
<li>Apache:</li>
</ul>
<p><code>sh
  apache2 -v</code></p>
<ul>
<li>MySQL:</li>
</ul>
<p><code>sh
  mysql --version</code></p>
<ul>
<li>PHP:</li>
</ul>
<p><code>sh
  php -v</code></p>
<h3 id="configure-automatic-security-updates">Configure Automatic Security Updates</h3>
<p>Install <code>unattended-upgrades</code> package:</p>
<pre><code class="language-sh">sudo apt install unattended-upgrades
</code></pre>
<p>Enable automatic updates:</p>
<pre><code class="language-sh">sudo dpkg-reconfigure --priority=low unattended-upgrades
</code></pre>
<p>By following these guidelines, KCSBâ€™s Omeka LAMP stack will remain up to date and secure, minimizing the risk of deprecation and ensuring continued compatibility with Omeka S.</p>
<hr />
<h1 id="backing-up-omeka-s">Backing Up Omeka S</h1>
<hr />
<h2 id="overview">Overview</h2>
<p>Backing up Omeka S involves two main components:
1. <strong>Omeka S Files</strong>: This includes the application files, configuration files, themes, plugins, and uploaded files.
2. <strong>Database</strong>: Omeka S uses a database (typically MySQL) to store all metadata, settings, and relationships.</p>
<p>Both components must be backed up regularly to ensure a complete and restorable backup.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Access to the server where Omeka S is installed.</li>
<li>Administrative privileges to access files and databases.</li>
<li>Basic knowledge of command-line operations</li>
</ul>
<h3 id="step-1-backing-up-omeka-s-files">Step 1: Backing Up Omeka S Files</h3>
<h4 id="manual-backup">Manual Backup</h4>
<p><strong>Connect to Your Server</strong>: Use SSH to connect to your server. I've been using 'archives@128.111.126.136', but I'm not sure if you're on the same computer, so you may have to set that up on your own. </p>
<p><code>sh
   ssh username@your-server-ip</code></p>
<p><strong>Navigate to the Omeka S Directory</strong>: Locate the directory where Omeka S is installed.</p>
<p><code>sh
   cd /var/www/html/omeka-s</code></p>
<p><strong>Create a Compressed Archive</strong>: Use the <code>tar</code> command to create a compressed archive of the Omeka S directory.</p>
<p><code>sh
   tar -czvf omeka-s-backup-$(date +%F).tar.gz .</code></p>
<p>This command creates a tar.gz file named with the current date.</p>
<p><strong>Move the Backup File</strong>: Move the backup file to a safe location.</p>
<p><code>sh
   mv omeka-s-backup-$(date +%F).tar.gz /path/to/backup/location</code></p>
<h4 id="automated-backup-using-a-cron-job">Automated Backup (Using a Cron Job)</h4>
<p><strong>Create a Backup Script</strong>: Create a shell script to automate the backup process.</p>
<p><code>sh
   nano backup-omeka-s.sh</code></p>
<p>Add the following content to the script:</p>
<p><code>sh
   #!/bin/bash
   BACKUP_DIR="/path/to/backup/location"
   OMEKA_DIR="/path/to/omeka-s"
   TIMESTAMP=$(date +%F)
   tar -czvf $BACKUP_DIR/omeka-s-backup-$TIMESTAMP.tar.gz -C $OMEKA_DIR .</code></p>
<p>Save and close the file.</p>
<p><strong>Make the Script Executable</strong>:</p>
<p><code>sh
   chmod +x backup-omeka-s.sh</code></p>
<p><strong>Create a Cron Job</strong>: Open the crontab editor.</p>
<p><code>sh
   crontab -e</code></p>
<p>Add the following line to schedule the backup script to run daily at midnight:</p>
<p><code>sh
   0 0 * * * /path/to/backup-omeka-s.sh</code></p>
<h3 id="step-2-backing-up-the-database">Step 2: Backing Up the Database</h3>
<h4 id="manual-backup_1">Manual Backup</h4>
<p><strong>Dump the Database</strong>: Use the <code>mysqldump</code> command to create a backup of the Omeka S database.</p>
<p><code>sh
   mysqldump -u username -p omeka_database &gt; omeka-db-backup-$(date +%F).sql</code></p>
<p>Enter your MySQL password when prompted.</p>
<p><strong>Move the Backup File</strong>: Move the SQL file to a safe location.</p>
<p><code>sh
   mv omeka-db-backup-$(date +%F).sql /path/to/backup/location</code></p>
<h4 id="automated-backup-using-a-cron-job_1">Automated Backup (Using a Cron Job)</h4>
<p><strong>Create a Database Backup Script</strong>: Create a shell script to automate the database backup process.</p>
<p><code>sh
   nano backup-omeka-db.sh</code></p>
<p>Add the following content to the script:</p>
<p><code>sh
   #!/bin/bash
   BACKUP_DIR="/path/to/backup/location"
   DB_USER="username"
   DB_PASS="password"
   DB_NAME="omeka_database"
   TIMESTAMP=$(date +%F)
   mysqldump -u $DB_USER -p$DB_PASS $DB_NAME &gt; $BACKUP_DIR/omeka-db-backup-$TIMESTAMP.sql</code></p>
<p>Save and close the file.</p>
<p><strong>Make the Script Executable</strong>:</p>
<p><code>sh
   chmod +x backup-omeka-db.sh</code></p>
<p><strong>Create a Cron Job</strong>: Open the crontab editor.</p>
<p><code>sh
   crontab -e</code></p>
<p>Add the following line to schedule the database backup script to run daily at 1 AM:</p>
<p><code>sh
   0 1 * * * /path/to/backup-omeka-db.sh</code></p>
<h3 id="step-3-verifying-backups">Step 3: Verifying Backups</h3>
<p><strong>List Backup Files</strong>: Check the backup location to ensure the files are created.</p>
<p><code>sh
   ls /path/to/backup/location</code></p>
<p><strong>Test Restoration</strong>: Periodically test the restoration process to ensure backups are valid and complete.</p>
<p>Regularly backing up your Omeka S installation is critical for data integrity and disaster recovery. By following the steps outlined in this documentation, you can ensure that both your files and database are safely backed up and can be restored if needed.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
